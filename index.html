<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="language" content="Spanish">
    <meta name="description" content="Pagina web oficial del estudio indie de desarrollo de videojuegos 'TikiTello', por TikiTello">
    <meta name="keywords" content="TikiTello, grupo de desarrollo de videojuegos">
    <meta name="author" content="TikiTello">
    <meta name="refresh" content="2">
    <meta name="robots" content="index">
    <meta property="og:title" content="TikiTello | Home" />
    <meta property="og:image" content="https://scontent.fmex16-2.fna.fbcdn.net/v/t39.30808-6/384204867_340461501881957_3632722970034998217_n.jpg?_nc_cat=108&ccb=1-7&_nc_sid=5f2048&_nc_ohc=qBLtwZE4rd4AX_JK-Gw&_nc_ht=scontent.fmex16-2.fna&oh=00_AfAUSN9xGR0-29Css718AmS00-UwLinfL277j7xy0fK2Vg&oe=654DBBC3" />
    <meta property="og:description" content="Pagina web oficial del estudio indie de desarrollo de videojuegos 'TikiTello', por TikiTello" />
    <title>TikiTello | Home</title>
    <link rel="shortcut icon" type="image/x-icon" href="images/logo.png">
    <!--  - -  normalize.css  - -  -->
    <link rel="stylesheet" href="css/normalize.css">
    <!--  - -  Link to css  - -  -->
    <link rel="stylesheet" href="css/index.css">
    <!--  - -  SweetAlerts  - -  -->
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
</head>
<body>

    <!--  - -  ==========================  Pagina  ==========================  - -  -->

    <!--  - -  Home  - -  -->

    <section class="home" id="home">
        <div class="home-text container">
            <h2 class="home-title">
                <img src="images/logo.png" alt="" class="title-logo">
                <span class="home-subtitle">
                    <p class="subtitlefix" id="splasheszone"></p>
                </span>
            </h2>
            <script>
                window.addEventListener("load", function(event) {
                    console.log("Todos los recursos terminaron de cargar!");
                    
                    var splashes = [
                        "Hecho por TikiTello",
                        "¿Alguien realmente lee estos subtitulos?",
                        "Sé feliz hoy! Aunque únicamente sea por joder a los envidiosos",
                        "El tiempo sin ti es empo",
                        "¡Corre a por tus sueños! Si no los alcanzas, por lo menos haces deporte",
                        "Todo es divertido, siempre y cuando le ocurra a otra persona",
                        "Hoy amanecí como un campo sin vacas: desganado. ¡Buenos días!",
                        "Previsión del tiempo para esta noche: estará oscuro",
                        "Tengo que ir al oculista, pero nunca veo el momento",
                        "Lo más cerca que una persona llega a la perfección es el día que rellena una solicitud de empleo",
                        "Siembra un árbol y harás feliz a un perro",
                        "Gracias a Dios que soy ateo",
                        "Si el mundo es un pañuelo, ¿nosotros qué somos?",
                        "Hay dos palabras que te abrirán muchas puertas: Tire y Empuje",
                        "Solía pensar que soy indeciso, pero ahora no estoy seguro",
                        "Si buscas una mano que te ayude... ¡Búscala al final de tu brazo!",
                        "El silencio es oro. A menos que tengas hijos, ahí se convierte en sospecha",
                        "Una conciencia limpia es por lo general, una señal de mala memoria",
                        "Si al principio no tienes éxisto, entonces el paracaidismo definitivamente no es para ti",
                        "No te tomes la vida en serio. Nunca saldrás vivo de ella",
                        "Yo tenía un lado dulce... hasta que me lo comí",
                        "Más vale tarde, porque por la mañana duermo",
                        "Al que madruga, nadie le hace el desayuno",
                        "Ríe y el mundo reirá contigo, ronca y dormirás solo",
                        "Lo importante no es ganar, es hacer perder al otro",
                        "No soy vago, estoy en modo ahorro de energía",
                        "Odio ser bipolar, es una sensación fantástica",
                        "Las cuatro palabras más bonitas de nuestro idioma: ya te lo dije"
                    ]

                    document.querySelector('#splasheszone').innerHTML = splashes[Math.floor(Math.random() * splashes.length)]
                });

            </script>
        </div>
    </section>

    <div class="entire-page">

        <!--  - -  Post Filter  - -  -->

        <div class="post-filter container">
            <span class="filter-item active-filter" data-filter='all'>All</span>
            <span class="filter-item" data-filter='html'>HTML</span>
            <span class="filter-item" data-filter='css'>CSS</span>
            <span class="filter-item" data-filter='responsive'>Responsive</span>
        </div>

        <!--  - -  Posts  - -  -->

        <section class="post container" id="articleszone">
        </section>

        <!--  - -  Footer  - -  -->

        <div class="footer">
            <p>Pagina diseñada por <br> <br> <span class="fullname">Neo<span class="Name">GHCO</span></span></p>
            <div class="social">
                <a href="https://www.facebook.com/GHCO-107728201998587/"><ion-icon name="logo-facebook"></ion-icon></box-icon></a>
            </div>
        </div>
    
    </div>

    <!--  - -  JQuery  - -  -->

    <script src="https://code.jquery.com/jquery-3.6.1.js" integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI=" crossorigin="anonymous"></script>

    <!--  - -  Link to JS  - -  -->
    <script src="js/index.js"></script>
    <script src="js/read.js"></script>

    <script>
        // Ruta de la carpeta a verificar (puedes modificarla según tus necesidades)
        var carpeta = 'articles/';

        // Array para almacenar archivos válidos
        var archivosValidos = [];

        // Función para validar la estructura de un archivo JSON
        function validarEstructura(archivo) {
            try {
                var contenido = JSON.parse(archivo);
                return (
                    contenido.tipo !== undefined &&
                    contenido.titulo !== undefined &&
                    contenido.fecha !== undefined &&
                    contenido.descripcion !== undefined &&
                    contenido.autor !== undefined &&
                    contenido.articulo !== undefined &&
                    contenido.articulo.cabezera !== undefined &&
                    contenido.articulo.texto !== undefined
                );
            } catch (error) {
                return false;
            }
        }

        // Función para crear y agregar elementos HTML para cada archivo válido
        function crearElementosHTML() {
            var articlesZone = document.getElementById('articleszone');

            archivosValidos.forEach(function(archivo) {
                var postBox = document.createElement('div');
                postBox.className = 'post-box';

                var category = document.createElement('h2');
                category.className = 'category';
                category.textContent = archivo.contenido.tipo;

                var postTitle = document.createElement('a');
                postTitle.className = 'post-title';
                postTitle.textContent = archivo.contenido.titulo;
                postTitle.href = '#'; // Asigna la URL apropiada

                var postDate = document.createElement('span');
                postDate.className = 'post-date';
                postDate.textContent = archivo.contenido.fecha;

                var postDescription = document.createElement('p');
                postDescription.className = 'post-decription';
                postDescription.textContent = archivo.contenido.descripcion;

                var profile = document.createElement('div');
                profile.className = 'profile';

                var profileName = document.createElement('span');
                profileName.className = 'profile-name';
                profileName.textContent = archivo.contenido.autor;

                // Verifica si el autor es "TikiTello" y ajusta la imagen de perfil
                if (archivo.contenido.autor === 'TikiTello') {
                    var profileImage = document.createElement('img');
                    profileImage.className = 'profile-img';
                    profileImage.src = 'images/logo.png'; // Asigna la URL de la imagen de perfil personalizada
                    profile.appendChild(profileImage);
                }

                // Verifica si la categoría es "Indie Studio" y agrega la clase "indiestudio" y una imagen personalizada
                if (archivo.contenido.tipo === 'Indie Studio') {
                    postBox.classList.add('indiestudio');
                    var postImage = document.createElement('img');
                    postImage.className = 'post-img';
                    postImage.src = 'images/logo.png'; // Asigna la URL de la imagen personalizada
                    postBox.appendChild(postImage);
                }

                postBox.appendChild(category);
                postBox.appendChild(postTitle);
                postBox.appendChild(postDate);
                postBox.appendChild(postDescription);

                profile.appendChild(profileName);
                postBox.appendChild(profile);

                articlesZone.appendChild(postBox);
            });
        }

        // Función para listar los archivos en la carpeta, validarlos y guardar los válidos en el array
        function listFiles() {
            fetch(carpeta)
                .then(response => response.text())
                .then(data => {
                    console.log('Ruta completa de la carpeta "articles/":', window.location.origin + '/' + carpeta);
                    var parser = new DOMParser();
                    var htmlDoc = parser.parseFromString(data, "text/html");
                    var links = Array.from(htmlDoc.querySelectorAll('a'));
                    var archivos = links
                        .map(a => a.href) // Obtener rutas completas
                        .filter(file => file.startsWith(window.location.origin + '/' + carpeta)); // Filtrar rutas de la carpeta "articles/"

                    console.log('Archivos en la carpeta "articles/":');

                    archivos.forEach(function(archivo, index) {
                        fetch(archivo)
                            .then(response => response.text())
                            .then(data => {
                                if (validarEstructura(data)) {
                                    console.log('Archivo válido:', archivo);
                                    archivosValidos.push({ nombre: archivo.split('/').pop(), contenido: JSON.parse(data) });

                                    // Verificar si se ha llegado al último archivo
                                    if (index === archivos.length - 1) {
                                        // Llama a la función para crear y agregar elementos HTML cuando se haya procesado el último archivo
                                        crearElementosHTML();
                                    }
                                } else {
                                    console.log('Archivo no válido (estructura incorrecta):', archivo);
                                }
                            })
                            .catch(error => {
                                console.error('Error al leer el archivo:', archivo, error);
                            });
                    });
                })
                .catch(error => {
                    console.error('Error al leer la carpeta:', error);
                });
        }

        listFiles(); // Llama a la función para listar y validar los archivos cuando se cargue la página.
    </script>





    <!--  - -  External Resources  - -  -->

    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

</body>
</html>